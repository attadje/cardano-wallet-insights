{"mappings":"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","sources":["src/js/util.js","src/js/model.js","src/js/config.js","src/js/views/rewardsHistView.js","src/js/controller.js"],"sourcesContent":["import { TIMEOUT_SEC, BF_APIKEY, BF_PARAM_HEADER } from \"./config\";\n\nvar bf_header = new Headers();\nbf_header.append(\"project_id\", \"mainnetiSXrfNxhpPChKCnts2KX9MJ1eQ7exYgb\");\n\nconst timeout = function (s) {\n  return new Promise(function (_, reject) {\n    setTimeout(function () {\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\n    }, s * 1000);\n  });\n};\n\nexport const AJAX = async function (url, uploadData = undefined) {\n  try {\n    const fetchPro = uploadData\n      ? fetch(url, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(uploadData),\n        })\n      : fetch(url, {\n          method: \"GET\",\n          headers: bf_header,\n        });\n\n    const res = await Promise.race([fetchPro, timeout(TIMEOUT_SEC)]);\n    const data = await res.json();\n\n    if (!res.ok) throw new Error(`${data.message} (${res.status})`);\n    return data;\n  } catch (err) {\n    throw err;\n  }\n};\n\n// 1 ADA = 1 million de lovelance\nexport const lovelanceToAda = (lovelance) => lovelance / (1000 * 1000);\n","import { BF_APIKEY, BF_NETWORK, STAKE_ADDR } from \"./config.js\";\nimport { AJAX } from \"./util.js\";\n\nexport const state = {\n  api_key: BF_APIKEY,\n  network: BF_NETWORK.mainnet,\n};\n\nexport const reward_history = async function (stake_adrr) {\n  const rewards_hist = await AJAX(\n    `${state.network}/accounts/${stake_adrr}/rewards`\n  );\n  const epochs = [];\n  const rewards = [];\n  rewards_hist.forEach(function (item) {\n    epochs.push(item.epoch);\n    rewards.push(item.amount);\n  });\n\n  return { x: epochs, y: rewards };\n\n  //cardano-mainnet.blockfrost.io/api/v0/accounts/{stake_address}/rewards\n};\n","// Blockfrost API\nexport const BF_APIKEY = \"mainnetiSXrfNxhpPChKCnts2KX9MJ1eQ7exYgb\";\nexport const BF_NETWORK = {\n  mainnet: \"https://cardano-mainnet.blockfrost.io/api/v0\",\n  testnet: \"\thttps://cardano-testnet.blockfrost.io/api/v0\",\n  ipfs: \"https://ipfs.blockfrost.io/api/v0\",\n};\n\nexport const STAKE_ADDR =\n  \"stake1uyttshgm6jtejckv48tll58hfw3fg2ffrcc4d5qvcc4yc7q9jsalf\";\n\nexport const TIMEOUT_SEC = 120;\n","class rewardsHistView {\n  _ctx = document.getElementById(\"chartBig1\").getContext(\"2d\");\n\n  generateChart(epochs, rewards) {\n    var gradientStroke = this._ctx.createLinearGradient(0, 230, 0, 50);\n\n    gradientStroke.addColorStop(1, \"rgba(72,72,176,0.1)\");\n    gradientStroke.addColorStop(0.4, \"rgba(72,72,176,0.0)\");\n    gradientStroke.addColorStop(0, \"rgba(119,52,169,0)\"); //purple colors\n\n    var config = {\n      type: \"line\",\n      data: {\n        labels: epochs,\n        datasets: [\n          {\n            label: \"Rewards\",\n            fill: true,\n            backgroundColor: gradientStroke,\n            borderColor: \"#d346b1\",\n            borderWidth: 2,\n            borderDash: [],\n            borderDashOffset: 0.0,\n            pointBackgroundColor: \"#d346b1\",\n            pointBorderColor: \"rgba(255,255,255,0)\",\n            pointHoverBackgroundColor: \"#d346b1\",\n            pointBorderWidth: 20,\n            pointHoverRadius: 4,\n            pointHoverBorderWidth: 15,\n            pointRadius: 4,\n            data: rewards,\n          },\n        ],\n      },\n      options: {\n        maintainAspectRatio: false,\n        legend: {\n          display: false,\n        },\n\n        tooltips: {\n          backgroundColor: \"#f5f5f5\",\n          titleFontColor: \"#333\",\n          bodyFontColor: \"#666\",\n          bodySpacing: 4,\n          xPadding: 12,\n          mode: \"nearest\",\n          intersect: 0,\n          position: \"nearest\",\n        },\n        responsive: true,\n        scales: {\n          yAxes: [\n            {\n              barPercentage: 1.6,\n              gridLines: {\n                drawBorder: false,\n                color: \"rgba(225,78,202,0.1)\",\n                zeroLineColor: \"rgba(225,78,202,0.1)\",\n              },\n              ticks: {\n                // suggestedMin: 60,\n                // suggestedMax: 125,\n                padding: 20,\n                fontColor: \"#9a9a9a\",\n                callback: function (val, index) {\n                  // Hide every 2nd tick label\n                  return index % 2 === 0 ? val : \"\";\n                },\n              },\n            },\n          ],\n\n          xAxes: [\n            {\n              barPercentage: 1.6,\n              gridLines: {\n                drawBorder: false,\n                color: \"rgba(225,78,202,0.0)\",\n                zeroLineColor: \"transparent\",\n              },\n              ticks: {\n                padding: 20,\n                fontColor: \"#9a9a9a\",\n                callback: function (val, index) {\n                  // Hide every 2nd tick label\n                  return index % 4 === 0 ? val : \"\";\n                },\n              },\n            },\n          ],\n        },\n      },\n    };\n    var myChartData = new Chart(this._ctx, config);\n\n    document.querySelector(\"#allEpochs\").addEventListener(\"click\", function () {\n      var data = myChartData.config.data;\n      data.datasets[0].data = rewards;\n      data.labels = epochs;\n      myChartData.update();\n    });\n\n    document.querySelector(\"#mEpochs\").addEventListener(\"click\", function () {\n      var chart_data = rewards.slice(rewards.length - 18, rewards.length);\n      var data = myChartData.config.data;\n      data.datasets[0].data = chart_data;\n      data.labels = epochs.slice(epochs.length - 18, epochs.length);\n      myChartData.update();\n    });\n\n    document.querySelector(\"#yEpochs\").addEventListener(\"click\", function () {\n      var chart_data = [60, 80, 65, 130, 80, 105, 90, 130, 70, 115, 60, 130];\n      var data = myChartData.config.data;\n      data.datasets[0].data = chart_data;\n      data.labels = chart_labels;\n      myChartData.update();\n    });\n  }\n}\n\nexport default new rewardsHistView();\n","import { reward_history } from \"./model.js\";\nimport { STAKE_ADDR } from \"./config\";\nimport rewardsHistView from \"./views/rewardsHistView.js\";\nimport { lovelanceToAda } from \"./util.js\";\n\nconst controlRewardsHist = async function () {\n  const rewards_hist = await reward_history(STAKE_ADDR);\n\n  const adaRewards = rewards_hist.y.flatMap((x) => lovelanceToAda(x));\n\n  rewardsHistView.generateChart(rewards_hist.x, adaRewards);\n};\n\ncontrolRewardsHist();\n"],"names":["$504c2f61098a857b$var$bf_header","Headers","append","$0f1d4402dffacf5b$export$ca000e230c0caa3e","$0f1d4402dffacf5b$export$4c1cc89a0c467f4f","async","stake_adrr","rewards_hist","url","uploadData","fetchPro","fetch","method","headers","body","JSON","stringify","res","Promise","race","s","_","reject","setTimeout","Error","data","json","ok","message","status","err","$504c2f61098a857b$export$2b3ff41fecbef7c8","epochs","rewards","forEach","item","push","epoch","amount","x","y","$c88b9fe5200963f6$export$2e2bcd8739ae039","_ctx","document","getElementById","getContext","generateChart","gradientStroke","this","createLinearGradient","addColorStop","config","type","labels","datasets","label","fill","backgroundColor","borderColor","borderWidth","borderDash","borderDashOffset","pointBackgroundColor","pointBorderColor","pointHoverBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBorderWidth","pointRadius","options","maintainAspectRatio","legend","display","tooltips","titleFontColor","bodyFontColor","bodySpacing","xPadding","mode","intersect","position","responsive","scales","yAxes","barPercentage","gridLines","drawBorder","color","zeroLineColor","ticks","padding","fontColor","callback","val","index","xAxes","myChartData","Chart","querySelector","addEventListener","update","chart_data","slice","length","chart_labels","adaRewards","flatMap","$f50bd1f2915ed0f2$var$controlRewardsHist"],"version":3,"file":"index.caa0c52c.js.map"}